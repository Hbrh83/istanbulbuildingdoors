<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Ä°stanbul KapÄ± AtlasÄ± - Cluster'lÄ±</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Marker Cluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

  <style>
    #map { height: 600px; width: 100%; }

    .popup-img {
      width: 180px;
      border-radius: 6px;
      margin-bottom: 10px;
    }


    /* Cluster arka planÄ±nÄ± tamamen sÄ±fÄ±rlÄ±yoruz */
    .marker-cluster,
    .marker-cluster div {
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
    }

    /* ORTADAKÄ° KIRMIZI DAÄ°RE */
    .marker-cluster div {
      width: 32px;
      height: 32px;
      line-height: 32px;
      border-radius: 50%;
      background: #9f1d2d !important; /* koyu kÄ±rmÄ±zÄ± */
      color: #fff !important;
      font-size: 16px;
      font-weight: 600;
      position: relative;
      text-align: center;
    }

    /* 1. SAYDAM HALKA */
    .marker-cluster div::before {
      content: "";
      position: absolute;
      top: -5px;
      left: -5px;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: rgba(159, 29, 45, 0.25); /* yarÄ± saydam */
      z-index: -1;
    }

    /* 2. DIÅžTAKÄ° DAHA SAYDAM HALKA */
    .marker-cluster div::after {
      content: "";
      position: absolute;
      top: -11px;
      left: -11px;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: rgba(159, 29, 45, 0.12); /* Ã§ok saydam */
      z-index: -2;
    }

  </style>
</head>

<body>

<div id="map"></div>

<script>
  // ðŸŒ HARÄ°TA
  const map = L.map('map').setView([41.0351, 28.9784], 13);

  // ðŸ—º GOOGLE MAPS ALTLIK
  L.tileLayer('http://{s}.google.com/vt?lyrs=m&x={x}&y={y}&z={z}', {
    maxZoom: 20,
    subdomains: ['mt0','mt1','mt2','mt3']
  }).addTo(map);

  // ðŸŸ¥ PNG KAPI Ä°KONU
  const doorIcon = L.icon({
    iconUrl: 'door_icon.png',
    iconSize: [40, 40],
    iconAnchor: [20, 40],
    popupAnchor: [0, -40]
  });

  // ðŸ“Œ KAPILAR (Ã¶rnek â€“ sen buraya dataset koyacaksÄ±n)
  const kapilar = [
    { coords: [41.0361, 28.9772], title: "BÃ¼yÃ¼k Zarifi ApartmanÄ±", image: "zarifi.jpg", description: "Art Nouveau kapÄ±" },
    { coords: [41.0380, 28.9788], title: "Tomtom KapÄ±", image: "kapi2.jpg", description: "Tomtom'da tarihi kapÄ±" }
  ];

  // CLUSTER
  const markers = L.markerClusterGroup();

  kapilar.forEach(k => {
    const marker = L.marker(k.coords, { icon: doorIcon })
      .bindPopup(`
        <div style="width:200px">
          <img class="popup-img" src="${k.image}">
          <h3 style="margin:0;font-size:16px;">${k.title}</h3>
          <p style="font-size:13px;">${k.description}</p>

          <a href="https://www.google.com/maps?q=&layer=c&cbll=${k.coords[0]},${k.coords[1]}"
             target="_blank"
             style="padding:6px 8px; background:#eee; border-radius:6px; text-decoration:none; color:#333; font-size:13px;">
            Street View
          </a>
        </div>
      `);

    markers.addLayer(marker);
  });

  map.addLayer(markers);

</script>

</body>
</html>
